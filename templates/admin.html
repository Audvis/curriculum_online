<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Developer Timesheet - Panel de Administración</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <div class="logo">
                <i class="fas fa-clock"></i>
                <span>DevTimesheet</span>
            </div>
            <div class="nav-links">
                <a href="/">Vista</a>
                <a href="/admin" class="active">Admin Panel</a>
            </div>
        </div>
    </nav>

    <main class="main-content admin-panel">
        <header class="page-header">
            <h1>Panel de Administración</h1>
            <p>Gestiona desarrolladores y registros de tiempo</p>
        </header>

        <!-- Tabs -->
        <div class="admin-tabs">
            <button class="tab-btn active" data-tab="developers">
                <i class="fas fa-users"></i> Desarrolladores
            </button>
            <button class="tab-btn" data-tab="timesheets">
                <i class="fas fa-clock"></i> Registros de Tiempo
            </button>
        </div>

        <!-- Developers Tab -->
        <section class="tab-content active" id="developersTab">
            <div class="section-header">
                <h2>Gestión de Desarrolladores</h2>
                <button class="btn btn-primary" onclick="openDeveloperModal()">
                    <i class="fas fa-plus"></i> Nuevo Desarrollador
                </button>
            </div>

            <div class="admin-table-container">
                <table class="admin-table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Nombre</th>
                            <th>Email</th>
                            <th>Posición</th>
                            <th>Departamento</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody id="developersAdminTable">
                        <!-- Developers will be inserted here -->
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Timesheets Tab -->
        <section class="tab-content" id="timesheetsTab">
            <div class="section-header">
                <h2>Gestión de Registros de Tiempo</h2>
                <button class="btn btn-primary" onclick="openTimesheetModal()">
                    <i class="fas fa-plus"></i> Nuevo Registro
                </button>
            </div>

            <div class="admin-table-container">
                <table class="admin-table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Fecha</th>
                            <th>Desarrollador</th>
                            <th>Proyecto</th>
                            <th>Tipo</th>
                            <th>Horas</th>
                            <th>Estado</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody id="timesheetsAdminTable">
                        <!-- Timesheets will be inserted here -->
                    </tbody>
                </table>
            </div>
        </section>
    </main>

    <!-- Developer Modal -->
    <div class="modal" id="developerModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="developerModalTitle">Nuevo Desarrollador</h3>
                <button class="close-btn" onclick="closeDeveloperModal()">&times;</button>
            </div>
            <form id="developerForm" onsubmit="saveDeveloper(event)">
                <input type="hidden" id="developerId">
                <div class="form-group">
                    <label for="devName">Nombre Completo</label>
                    <input type="text" id="devName" required placeholder="Ej: Juan Pérez">
                </div>
                <div class="form-group">
                    <label for="devEmail">Email</label>
                    <input type="email" id="devEmail" required placeholder="Ej: juan@empresa.com">
                </div>
                <div class="form-group">
                    <label for="devPosition">Posición</label>
                    <input type="text" id="devPosition" required placeholder="Ej: Senior Developer">
                </div>
                <div class="form-group">
                    <label for="devDepartment">Departamento</label>
                    <input type="text" id="devDepartment" required placeholder="Ej: Desarrollo Backend">
                </div>
                <div class="form-group">
                    <label for="devAvatar">URL Avatar (opcional)</label>
                    <input type="url" id="devAvatar" placeholder="https://...">
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeDeveloperModal()">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Guardar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Timesheet Modal -->
    <div class="modal" id="timesheetModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="timesheetModalTitle">Nuevo Registro de Tiempo</h3>
                <button class="close-btn" onclick="closeTimesheetModal()">&times;</button>
            </div>
            <form id="timesheetForm" onsubmit="saveTimesheet(event)">
                <input type="hidden" id="timesheetId">
                <div class="form-group">
                    <label for="tsDeveloper">Desarrollador</label>
                    <select id="tsDeveloper" required>
                        <option value="">Seleccionar desarrollador</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="tsDate">Fecha</label>
                    <input type="date" id="tsDate" required>
                </div>
                <div class="form-group">
                    <label for="tsProject">Nombre del Proyecto</label>
                    <input type="text" id="tsProject" required placeholder="Ej: Sistema de Inventario">
                </div>
                <div class="form-group">
                    <label for="tsDescription">Descripción de la Tarea</label>
                    <textarea id="tsDescription" required rows="3" placeholder="Describe la tarea realizada..."></textarea>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="tsHours">Horas Trabajadas</label>
                        <input type="number" id="tsHours" required min="0.5" max="24" step="0.5" placeholder="Ej: 8">
                    </div>
                    <div class="form-group">
                        <label for="tsType">Tipo de Tarea</label>
                        <select id="tsType" required>
                            <option value="">Seleccionar tipo</option>
                            <option value="Development">Desarrollo</option>
                            <option value="Testing">Testing</option>
                            <option value="Code Review">Code Review</option>
                            <option value="Meeting">Reunión</option>
                            <option value="Documentation">Documentación</option>
                            <option value="Bug Fix">Corrección de Bugs</option>
                            <option value="Planning">Planificación</option>
                            <option value="Research">Investigación</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label for="tsStatus">Estado</label>
                    <select id="tsStatus" required>
                        <option value="Completed">Completado</option>
                        <option value="In Progress">En Progreso</option>
                        <option value="Blocked">Bloqueado</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="tsNotes">Notas (opcional)</label>
                    <textarea id="tsNotes" rows="2" placeholder="Notas adicionales..."></textarea>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeTimesheetModal()">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Guardar</button>
                </div>
            </form>
        </div>
    </div>

    <footer class="footer">
        <p>&copy; 2024 DevTimesheet - Sistema de Gestión de Hojas de Trabajo</p>
    </footer>

    <script src="{{ url_for('static', filename='js/admin.js') }}"></script>
</body>
</html>
